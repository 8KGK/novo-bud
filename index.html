<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>–ö–∞—Ä—Ç–∞ –ù–æ–≤–æ–±—É–¥–æ–≤</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="map"></div>

    <div class="info-banner" id="infoBanner">
        üìç –ö–ª—ñ–∫–∞–π—Ç–µ –Ω–∞ –∫–∞—Ä—Ç—ñ, —â–æ–± –ø–æ–∑–Ω–∞—á–∏—Ç–∏ –∫—É—Ç–∏ —Ç–µ—Ä–∏—Ç–æ—Ä—ñ—ó –ñ–ö<br>
        <span class="point-counter" id="pointCounter">–¢–æ—á–æ–∫: 0 (–º—ñ–Ω—ñ–º—É–º 3)</span>
    </div>

    <div class="legend">
        <h4>–°—Ç–∞—Ç—É—Å –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–∞</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: rgba(52, 152, 219, 0.6);"></div>
            <span>–ì–æ—Ç–æ–≤–∏–π</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: rgba(241, 196, 15, 0.6);"></div>
            <span>–ë—É–¥—É—î—Ç—å—Å—è</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: rgba(46, 204, 113, 0.6);"></div>
            <span>–ü–ª–∞–Ω—É—î—Ç—å—Å—è</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: rgba(231, 76, 60, 0.6);"></div>
            <span>–ù–µ –±—É–¥—É—î—Ç—å—Å—è</span>
        </div>
    </div>

    <div class="toolbar" id="toolbar">
        <button onclick="UI.startAddingComplex()">‚ûï –î–æ–¥–∞—Ç–∏ –ñ–ö</button>
        <button onclick="UI.toggleDeleteMode()" class="secondary" id="deleteBtn">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏ –ñ–ö</button>
        <button onclick="Storage.exportData()" class="secondary">üíæ –ï–∫—Å–ø–æ—Ä—Ç</button>
        <button onclick="document.getElementById('importFile').click()" class="secondary">üì• –Ü–º–ø–æ—Ä—Ç</button>
        <button onclick="Storage.syncData()" class="secondary sync-btn">üîÑ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è</button>
    </div>
    
    <input type="file" id="importFile" accept=".json" style="display: none;" onchange="Storage.importData(event)">

    <div class="toolbar" id="addingToolbar" style="display: none;">
        <button onclick="UI.finishDrawing()" class="finish" id="finishBtn" disabled>‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç–∏ (–º—ñ–Ω. 3 —Ç–æ—á–∫–∏)</button>
        <button onclick="UI.undoLastPoint()" class="secondary">‚Ü©Ô∏è –í—ñ–¥–º—ñ–Ω–∏—Ç–∏ —Ç–æ—á–∫—É</button>
        <button onclick="UI.cancelAdding()" class="btn-cancel">‚ùå –°–∫–∞—Å—É–≤–∞—Ç–∏</button>
    </div>

    <div class="modal" id="addModal">
        <div class="modal-content">
            <h3>–î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π –ñ–ö</h3>
            <label>–ù–∞–∑–≤–∞ –ñ–ö</label>
            <input type="text" id="complexName" placeholder="–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: –ñ–ö –ó–ª–∞–≥–æ–¥–∞">
            
            <label>–¶—ñ–Ω–∞</label>
            <input type="text" id="complexPrice" placeholder="–≤—ñ–¥ 5.5 –º–ª–Ω –≥—Ä–Ω">
            
            <label>–°—Ç–∞—Ç—É—Å</label>
            <select id="complexStatus">
                <option value="ready">–ì–æ—Ç–æ–≤–∏–π</option>
                <option value="building" selected>–ë—É–¥—É—î—Ç—å—Å—è</option>
                <option value="planned">–ü–ª–∞–Ω—É—î—Ç—å—Å—è</option>
                <option value="stopped">–ù–µ –±—É–¥—É—î—Ç—å—Å—è/–ù–µ–º–∞—î –∑–≤'—è–∑–∫—É</option>
            </select>
            
            <label>–û–ø–∏—Å</label>
            <textarea id="complexDescription" rows="2" placeholder="–ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å –ñ–ö"></textarea>
            
            <label>–ü–æ–≤–µ—Ä—Ö–æ–≤—ñ—Å—Ç—å</label>
            <input type="text" id="complexFloors" placeholder="25 –ø–æ–≤–µ—Ä—Ö—ñ–≤">
            
            <label>–ó–∞–±—É–¥–æ–≤–Ω–∏–∫</label>
            <input type="text" id="complexDeveloper" placeholder="–ù–∞–∑–≤–∞ –∫–æ–º–ø–∞–Ω—ñ—ó">
            
            <div id="coordinatesInfo" style="margin: 10px 0; color: #27ae60; font-size: 12px;"></div>
            
            <div class="modal-buttons">
                <button class="btn-save" onclick="UI.saveComplex()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                <button class="btn-cancel" onclick="UI.cancelAdding()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
            </div>
        </div>
    </div>

    <div class="sync-status" id="syncStatus"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/map.js"></script>
    <script src="js/ui.js"></script>
</body>
</html>